{"version":3,"sources":["components/PeopleForm.js","components/Person.js","components/People.js","services/persons.js","components/SearchBox.js","components/Notification.js","App.js","index.js"],"names":["PeopleForm","props","person","peopleToShow","find","name","newName","onSubmit","id","isUpdated","updatePerson","addPerson","className","value","onChange","handlePersonChange","newNumber","handleNumberChange","type","Person","number","People","map","i","key","onClick","deletePerson","baseUrl","axios","get","then","response","data","newObject","post","put","delete","SearchBox","filteredPeople","handlePersonSearch","Notification","message","errorMessage","App","useState","persons","setPeople","setNewName","setNewNumber","showAll","setShowAll","searchPerson","setSearchPerson","setFilteredPeople","setMessage","setErrorMessage","setUpdated","useEffect","personService","initialPeople","p","changedPerson","returnedPerson","setTimeout","catch","error","handleSetUpdated","event","target","filter","toLowerCase","includes","preventDefault","personObject","window","confirm","concat","console","log","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1ad3151f.chunk.js","sourcesContent":["import React from 'react';\n\nconst PeopleForm = (props) => {\n  const person = props.peopleToShow.find(person => person.name === props.newName)\n  const getPersonId = () => {\n    if (props.newName && person) {\n      return person.id\n    }\n  }\n  \n  return (\n    <form onSubmit=\n      {(getPersonId && props.isUpdated)\n      ? props.updatePerson\n      : props.addPerson\n      }\n    >\n      <div>\n        <span>name: </span> \n        <input \n          className=\"name\"\n          value={props.newName} \n          onChange={props.handlePersonChange}\n        />\n      </div>\n      <div>\n        <span>number: </span>\n        <input \n          className=\"number\"\n          value={props.newNumber} \n          onChange={props.handleNumberChange}\n        />  \n      </div>\n      <button className=\"button\" type=\"submit\">ADD</button>\n    </form>\n  )\n}\n\nexport default PeopleForm","import React from 'react';\n\nconst Person = ({ person }) => {\n  return (\n    <div className=\"person\">\n      {person.name} {person.number}\n    </div>\n  )\n}\n\nexport default Person\n","import React from 'react';\nimport Person from './Person';\n\nconst People = (props) => {\n  return (\n    <div>\n      {props.peopleToShow.map((person, i) => \n        <div key={i}>\n          <Person \n            person={person} \n          />\n          <button className=\"button\" onClick={() => props.deletePerson(person.id)}>DELETE</button>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default People","import axios from 'axios';\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst del = id => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, del }","import React from 'react';\n\nconst SearchBox = (props) => {\n  return (\n    <div>\n      <span>filter shown with </span>\n      <input value={props.filteredPeople} onChange={props.handlePersonSearch}/>\n    </div>\n  )\n}\n\nexport default SearchBox","import React from 'react';\n\nconst Notification = ({ message, errorMessage }) => {\n  return (\n    <div>\n      {message \n      ? <div className=\"success\">{message}</div>\n      : <div className=\"error\">{errorMessage}</div>\n      }\n    </div>\n  )\n}\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport PeopleForm from './components/PeopleForm';\nimport People from './components/People'\nimport personService from './services/persons';\nimport SearchBox from './components/SearchBox';\nimport Notification from './components/Notification';\n\nconst App = () => {\n  const [persons, setPeople] = useState([]) \n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [showAll, setShowAll] = useState(true)\n  const [searchPerson, setSearchPerson]  = useState('')\n  const [filteredPeople, setFilteredPeople] = useState([])\n  const [message, setMessage] = useState('')\n  const [errorMessage, setErrorMessage] = useState('')\n  const [isUpdated, setUpdated] = useState(false)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPeople => {\n        setPeople(initialPeople)\n      })\n  }, [])\n\n  const peopleToShow = showAll\n  ? persons\n  : filteredPeople\n\n  const handlePersonSearch = (event) => {\n    let searchPerson = event.target.value\n    let filteredPeople = persons.filter(person => {\n      return person.name.toLowerCase().includes(searchPerson.toLowerCase())\n    })\n    setSearchPerson(searchPerson)\n    if (searchPerson === '') {\n      setShowAll(peopleToShow)\n    } else {\n      setFilteredPeople(filteredPeople)\n      setShowAll(!showAll)\n    }\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n    const namesOfPeopleInPhonebook = persons.map((person) => {\n      return person.name\n    })\n    namesOfPeopleInPhonebook.includes(newName) // && !persons.includes(newNumber)\n    ?\n    (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\n    && handleSetUpdated()\n    )\n    //alert(`${newName} is already added to the phonebook`)\n    :\n    personService\n    .create(personObject)\n    .then(returnedPerson => {\n      setPeople(persons.concat(returnedPerson))\n      setNewName('')\n      setNewNumber('')\n      setMessage(\n        `Added ${newName}`\n      )\n      setTimeout(() => {\n        setMessage(null)\n      }, 5000)\n    })\n  }\n\n  // TODO: after update one shouldn't need to refresh the page to get other people's contact info back\n  const updatePerson = (id, newNumber) => {\n    const person = peopleToShow.find(p => p.id === id)\n    const changedPerson = { ...person, number: newNumber }\n    personService\n    .update(id, changedPerson)\n    .then(returnedPerson => {\n      setPeople(persons.map(person => person.id === id && returnedPerson))\n      setMessage(\n        `Number was updated`\n      )\n      setTimeout(() => {\n        setMessage(null)\n      }, 5000)\n    })\n    .catch(error => {\n      setMessage(`Information of ${person.name} has already been removed from server`)\n    })\n    setTimeout(() => {\n      setMessage(null)\n    }, 5000)\n  }\n\n  const deletePerson = (id) => {\n    personService\n    .del(id)\n    .then(() => {\n      setPeople(persons.filter(p => p.id !== id))\n    })\n    .catch(error => {\n      setErrorMessage(\n        `Error happened`\n      )\n      console.log(error)\n    })\n  }\n\n  const handlePersonChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleSetUpdated = () => {\n    const person = peopleToShow.find(person => person.name === newName)\n    const id = person.id\n  \n    setUpdated(true)\n    updatePerson(id, newNumber)\n  }\n\n  return (\n    <div className=\"app\">\n      <h1>Phonebook</h1>\n      {(message || errorMessage) &&\n      <Notification \n        message={message} \n        errorMessage={errorMessage} />}\n      <SearchBox \n        searchPerson={searchPerson}\n        handlePersonSearch={handlePersonSearch}\n      />\n      <h2>add a new</h2>\n      <PeopleForm \n        addPerson={addPerson}\n        updatePerson={updatePerson}\n        newName={newName}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n        handlePersonChange={handlePersonChange}\n        peopleToShow={peopleToShow}\n        isUpdated={isUpdated}\n        handleSetUpdated={handleSetUpdated}\n      />\n      <h2>Numbers</h2>\n      <People \n        peopleToShow={peopleToShow}\n        deletePerson={deletePerson}\n      />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}